# Tauri 插件模块

> 更新时间：2026-02-21 15:08:21

## 相对路径面包屑

`[根目录](../../../CLAUDE.md) > [apps/readest-app](../) > **src-tauri/plugins**

## 模块职责

提供 Tauri 原生功能扩展，包括原生 API 桥接、文本转语音、支付等功能。

## 插件列表

### tauri-plugin-native-bridge

原生平台桥接插件，提供 Android/iOS/macOS/Windows 原生 API 访问。

**路径**: `apps/readest-app/src-tauri/plugins/tauri-plugin-native-bridge/`

**主要功能**:
- 目录选择器 (`select_directory`)
- 屏幕亮度控制 (`get_screen_brightness`, `set_screen_brightness`)
- 系统颜色方案 (`get_system_color_scheme`)
- 状态栏/安全区域 (`get_status_bar_height`, `get_safe_area_insets`)
- 应用内购买 (IAP) (`iap_initialize`, `iap_fetch_products`, `iap_purchase_product`)
- 外部 URL 打开 (`open_external_url`)
- 屏幕方向锁定 (`lock_screen_orientation`)
- 后台音频 (`use_background_audio`)
- Apple/Safari 认证 (`auth_with_safari`, `auth_with_custom_tab`)

**平台支持**:
- Android: Kotlin 实现
- iOS/macOS: Swift 实现
- Windows: Rust 实现

### tauri-plugin-native-tts

原生文本转语音插件，提供平台原生 TTS 功能。

**路径**: `apps/readest-app/src-tauri/plugins/tauri-plugin-native-tts/`

**主要功能**:
- 语音合成 (`speak`)
- 语音控制 (`pause`, `resume`, `stop`)
- 语音设置 (`set_voice`, `set_rate`, `set_pitch`)
- 媒体会话 (`update_media_session_metadata`)

**平台支持**:
- Android: Android TTS
- iOS/macOS: AVSpeechSynthesizer

## 入口与启动

- **native-bridge 入口**: `src-tauri/plugins/tauri-plugin-native-bridge/src/lib.rs`
- **native-tts 入口**: `src-tauri/plugins/tauri-plugin-native-tts/src/lib.rs`

## 关键依赖

- `tauri` - Tauri 框架
- `tauri-plugin` - Tauri 插件基础
- Android: Kotlin, Gradle
- iOS/macOS: Swift, Xcode

## 权限配置

权限定义在 `permissions/` 目录下:
- `default.toml` - 默认权限
- `autogenerated/commands/*.toml` - 命令级权限

## 变更记录

### 2026-02-21 - 模块文档创建
- 创建 Tauri 插件模块 CLAUDE.md
- 记录 native-bridge 和 native-tts 插件
